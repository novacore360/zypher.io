<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoBridge | Real-time Crypto to PayPal Exchange</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <!-- TradingView Widget -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        :root {
            /* Professional color scheme */
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --primary-glow: rgba(37, 99, 235, 0.1);

            --success: #10b981;
            --success-light: #34d399;
            --warning: #f59e0b;
            --warning-light: #fbbf24;
            --error: #ef4444;

            --paypal-blue: #0070ba;
            --paypal-light: #009cde;

            /* Light theme */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-tertiary: #94a3b8;
            --card-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --card-shadow-hover: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            /* Dark theme */
            --dark-bg-primary: #0f172a;
            --dark-bg-secondary: #1e293b;
            --dark-bg-tertiary: #334155;
            --dark-border: #475569;
            --dark-border-light: #334155;
            --dark-text-primary: #f1f5f9;
            --dark-text-secondary: #cbd5e1;
            --dark-text-tertiary: #94a3b8;
            --dark-card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --dark-card-shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
            --dark-gradient-bg: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body.dark-theme {
            background-color: var(--dark-bg-primary);
            color: var(--dark-text-primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        header {
            padding: 20px 0;
            position: sticky;
            top: 0;
            background-color: var(--bg-primary);
            z-index: 100;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--border-light);
        }

        .dark-theme header {
            background-color: rgba(15, 23, 42, 0.95);
            border-bottom-color: var(--dark-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: translateY(-1px);
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary), var(--paypal-blue));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--paypal-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark-theme .logo-text {
            background: linear-gradient(135deg, var(--primary-light), var(--paypal-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .price-update {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            background-color: var(--bg-secondary);
            border-radius: 12px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .dark-theme .price-update {
            background-color: var(--dark-bg-secondary);
            color: var(--dark-text-secondary);
        }

        .price-update:hover {
            background-color: var(--bg-tertiary);
            transform: translateY(-1px);
        }

        .dark-theme .price-update:hover {
            background-color: var(--dark-bg-tertiary);
        }

        .price-update i {
            color: var(--primary);
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .theme-toggle {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: none;
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
        }

        .dark-theme .theme-toggle {
            background-color: var(--dark-bg-secondary);
            color: var(--dark-text-secondary);
        }

        .dark-theme .theme-toggle:hover {
            background-color: var(--dark-bg-tertiary);
            color: var(--dark-text-primary);
        }

        /* Main Content */
        .main-content {
            padding: 40px 0;
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 60px;
            position: relative;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            margin-top: 40px;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 30px;
            left: 80px;
            right: 80px;
            height: 2px;
            background-color: var(--border);
            z-index: 1;
            margin-top: 40px;
        }

        .dark-theme .progress-steps::before {
            background-color: var(--dark-border);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
            margin-top: 40px;
        }

        .step-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
            margin-top: 40px;
        }

        .dark-theme .step-icon {
            background-color: var(--dark-bg-secondary);
            border-color: var(--dark-border);
            color: var(--dark-text-secondary);
        }

        .step.active .step-icon {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
            transform: scale(1.1);
        }

        .step.completed .step-icon {
            background-color: var(--success);
            border-color: var(--success);
            color: white;
        }

        .step.completed .step-icon::after {
            content: '✓';
            position: absolute;
            font-size: 1.2rem;
        }

        .step-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-align: center;
            transition: all 0.3s ease;
        }

        .dark-theme .step-label {
            color: var(--dark-text-secondary);
        }

        .step.active .step-label {
            color: var(--primary);
            font-weight: 700;
        }

        /* Card Styles */
        .card {
            background-color: var(--bg-primary);
            border-radius: 20px;
            border: 1px solid var(--border);
            padding: 32px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .dark-theme .card {
            background-color: var(--dark-bg-secondary);
            border-color: var(--dark-border);
            box-shadow: var(--dark-card-shadow);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-shadow-hover);
        }

        .dark-theme .card:hover {
            box-shadow: var(--dark-card-shadow-hover);
        }

        .card-header {
            margin-bottom: 28px;
            position: relative;
        }

        .card-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary), var(--paypal-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark-theme .card-title {
            background: linear-gradient(135deg, var(--primary-light), var(--paypal-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
        }

        .dark-theme .card-subtitle {
            color: var(--dark-text-secondary);
        }

        /* Crypto Grid */
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 640px) {
            .crypto-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 16px;
            }
        }

        .crypto-card {
            padding: 24px;
            border: 1px solid var(--border);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--bg-primary);
            position: relative;
            overflow: hidden;
        }

        .dark-theme .crypto-card {
            border-color: var(--dark-border);
            background-color: var(--dark-bg-secondary);
        }

        .crypto-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.1);
        }

        .dark-theme .crypto-card:hover {
            box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.2);
        }

        .crypto-card.selected {
            border-color: var(--primary);
            background-color: var(--primary-glow);
            box-shadow: 0 8px 30px rgba(37, 99, 235, 0.15);
        }

        .dark-theme .crypto-card.selected {
            background-color: rgba(37, 99, 235, 0.15);
        }

        .crypto-card.selected::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--paypal-blue));
        }

        .crypto-icon {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 28px;
            color: white;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
            overflow: hidden;
        }

        .crypto-icon img {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        .crypto-name {
            font-weight: 600;
            font-size: 1.125rem;
            margin-bottom: 4px;
        }

        .crypto-symbol {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .dark-theme .crypto-symbol {
            color: var(--dark-text-secondary);
        }

        .crypto-price {
            font-weight: 700;
            font-size: 1.25rem;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .dark-theme .crypto-price {
            color: var(--dark-text-primary);
        }

        .price-change {
            font-size: 0.875rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .price-change.negative {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .loading-price {
            width: 100px;
            height: 28px;
            background: linear-gradient(90deg,
                var(--border) 25%,
                var(--bg-tertiary) 50%,
                var(--border) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
            border-radius: 6px;
        }

        .dark-theme .loading-price {
            background: linear-gradient(90deg,
                var(--dark-border) 25%,
                var(--dark-bg-tertiary) 50%,
                var(--dark-border) 75%);
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* TradingView Widget */
        .tradingview-widget {
            margin-top: 30px;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border);
            height: 420px;
            display: none;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .dark-theme .tradingview-widget {
            border-color: var(--dark-border);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .tradingview-widget.active {
            display: block;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 28px;
        }

        .form-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .dark-theme .form-label {
            color: var(--dark-text-primary);
        }

        .form-control {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .dark-theme .form-control {
            background-color: var(--dark-bg-secondary);
            border-color: var(--dark-border);
            color: var(--dark-text-primary);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        .dark-theme .form-control:focus {
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
        }

        .input-group {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .input-group .form-control {
            flex: 1;
        }

        .input-group-select {
            width: 140px;
            flex-shrink: 0;
        }

        /* Amount Display */
        .amount-display {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 16px;
            padding: 28px;
            margin-top: 20px;
            border: 1px solid var(--border);
        }

        .dark-theme .amount-display {
            background: linear-gradient(135deg, var(--dark-bg-secondary), var(--dark-bg-tertiary));
            border-color: var(--dark-border);
        }

        .amount-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid var(--border);
        }

        .dark-theme .amount-row {
            border-bottom-color: var(--dark-border);
        }

        .amount-row:last-child {
            border-bottom: none;
            padding-top: 20px;
            margin-top: 10px;
            font-size: 1.375rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--paypal-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark-theme .amount-row:last-child {
            background: linear-gradient(135deg, var(--primary-light), var(--paypal-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .amount-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .dark-theme .amount-label {
            color: var(--dark-text-secondary);
        }

        .amount-value {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .bonus-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--success-light), var(--success));
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }

        /* Payment Summary */
        .payment-summary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 10px 40px rgba(37, 99, 235, 0.25);
        }

        .payment-summary-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .payment-summary-icon {
            width: 56px;
            height: 56px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            backdrop-filter: blur(10px);
        }

        .payment-summary-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .payment-summary-subtitle {
            opacity: 0.9;
            font-size: 0.95rem;
            margin-top: 4px;
        }

        .payment-details {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .payment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payment-item:last-child {
            border-bottom: none;
            font-size: 1.75rem;
            font-weight: 800;
            padding-top: 16px;
            margin-top: 8px;
        }

        .payment-label {
            opacity: 0.9;
        }

        .payment-value {
            font-weight: 600;
        }

        /* Wallet Info */
        .wallet-info {
            background-color: var(--bg-secondary);
            border-radius: 20px;
            padding: 32px;
            border: 1px solid var(--border);
            margin-top: 32px;
        }

        .dark-theme .wallet-info {
            background-color: var(--dark-bg-secondary);
            border-color: var(--dark-border);
        }

        .wallet-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .wallet-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--paypal-blue));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .wallet-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .dark-theme .wallet-title {
            color: var(--dark-text-primary);
        }

        .wallet-address {
            background-color: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            font-family: 'SF Mono', 'Monaco', 'Courier New', monospace;
            word-break: break-all;
            margin: 20px 0;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .dark-theme .wallet-address {
            background-color: var(--dark-bg-primary);
            border-color: var(--dark-border);
            color: var(--dark-text-primary);
        }

        .qr-container {
            display: flex;
            justify-content: center;
            margin: 32px 0;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background-color: white;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            color: #1e293b;
            font-weight: 700;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        .qr-code i {
            font-size: 72px;
            color: #1e293b;
            opacity: 0.7;
        }

        .qr-label {
            font-size: 0.95rem;
            color: #64748b;
        }

        /* Timer */
        .timer {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
            border: 2px solid var(--warning);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
            color: var(--warning);
            font-weight: 700;
            font-size: 1.125rem;
        }

        .timer i {
            font-size: 1.5rem;
        }

        /* Buttons */
        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(37, 99, 235, 0.4);
        }

        .btn-secondary {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }

        .dark-theme .btn-secondary {
            background-color: var(--dark-bg-secondary);
            color: var(--dark-text-primary);
            border-color: var(--dark-border);
        }

        .btn-secondary:hover {
            background-color: var(--bg-secondary);
            border-color: var(--text-secondary);
            transform: translateY(-2px);
        }

        .dark-theme .btn-secondary:hover {
            background-color: var(--dark-bg-tertiary);
            border-color: var(--dark-text-secondary);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .button-group {
            display: flex;
            gap: 20px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        /* Price Ticker */
        .price-ticker {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .ticker-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-radius: 12px;
            background-color: var(--bg-secondary);
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .dark-theme .ticker-item {
            background-color: var(--dark-bg-secondary);
        }

        .ticker-item:hover {
            background-color: var(--bg-tertiary);
            border-color: var(--border);
            transform: translateX(4px);
        }

        .dark-theme .ticker-item:hover {
            background-color: var(--dark-bg-tertiary);
            border-color: var(--dark-border);
        }

        .ticker-crypto {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .ticker-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .ticker-symbol {
            font-weight: 700;
            margin-bottom: 2px;
        }

        .ticker-name {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .dark-theme .ticker-name {
            color: var(--dark-text-secondary);
        }

        .ticker-price {
            text-align: right;
        }

        .ticker-price-value {
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 4px;
        }

        .ticker-price-change {
            font-size: 0.875rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .ticker-price-change.negative {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        /* Sidebar Cards */
        .sidebar-card {
            margin-bottom: 30px;
        }

        .rate-card {
            background: linear-gradient(135deg, var(--success-light), var(--success));
            color: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
        }

        .rate-card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .rate-card-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 16px;
        }

        .rate-card-subtitle {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        /* PayPal Info */
        .paypal-info {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background-color: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-top: 24px;
        }

        .dark-theme .paypal-info {
            background-color: var(--dark-bg-secondary);
            border-color: var(--dark-border);
        }

        .paypal-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--paypal-blue), var(--paypal-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .paypal-text {
            flex: 1;
        }

        .paypal-title {
            font-weight: 700;
            margin-bottom: 4px;
        }

        .paypal-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .dark-theme .paypal-subtitle {
            color: var(--dark-text-secondary);
        }

        /* Footer */
        footer {
            padding: 60px 0 40px;
            margin-top: 80px;
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border);
        }

        .dark-theme footer {
            background-color: var(--dark-bg-secondary);
            border-top-color: var(--dark-border);
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 32px;
            text-align: center;
        }

        .security-badges {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background-color: var(--bg-primary);
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .dark-theme .badge {
            background-color: var(--dark-bg-primary);
            color: var(--dark-text-secondary);
            border-color: var(--dark-border);
        }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
            border-color: var(--primary);
            color: var(--primary);
        }

        .badge i {
            color: var(--primary);
        }

        .disclaimer {
            color: var(--text-secondary);
            font-size: 0.875rem;
            max-width: 600px;
            line-height: 1.7;
        }

        .dark-theme .disclaimer {
            color: var(--dark-text-secondary);
        }

        .copyright {
            font-size: 0.875rem;
            color: var(--text-tertiary);
            margin-top: 20px;
        }

        .dark-theme .copyright {
            color: var(--dark-text-tertiary);
        }

        /* Screen transitions */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .tradingview-widget {
                height: 350px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 20px;
            }

            .card {
                padding: 24px;
            }

            .progress-steps {
                margin-bottom: 40px;
            }

            .progress-steps::before {
                left: 60px;
                right: 60px;
            }
        }

        @media (max-width: 480px) {
            .header-actions {
                gap: 12px;
            }

            .price-update {
                padding: 8px 12px;
                font-size: 0.75rem;
            }

            .progress-steps::before {
                display: none;
            }

            .step-icon {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <div class="logo-icon"> C⇄P </div>
                    <div class="logo-text">CryptoBridge</div>
                </a>
                <div class="header-actions">
                    <div class="price-update" id="lastUpdated">
                        <i class="fas fa-sync-alt"></i>
                        <span>Updating prices...</span>
                    </div>
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="progress-steps" id="progressSteps">
            <div class="step active" data-step="1">
                <div class="step-icon">1</div>
                <div class="step-label">Select Crypto</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-icon">2</div>
                <div class="step-label">Enter Details</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-icon">3</div>
                <div class="step-label">Send Payment</div>
            </div>
        </div>

        <div class="main-layout" style="display: grid; grid-template-columns: 1fr; gap: 32px;">
            <div class="main-content">
                <!-- Screen 1: Select Crypto -->
                <div class="card screen active" id="screen1">
                    <div class="card-header">
                        <h1 class="card-title">Select Cryptocurrency</h1>
                        <p class="card-subtitle">Choose a cryptocurrency to exchange to PayPal. All transactions include a +10% bonus over market price.</p>
                    </div>

                    <div class="crypto-grid" id="cryptoGrid">
                        <!-- Crypto cards will be populated by JavaScript -->
                    </div>

                    <!-- TradingView Widget Container -->
                    <div class="tradingview-widget" id="tradingViewWidget">
                        <!-- TradingView widget will be injected here -->
                    </div>

                    <div class="button-group">
                        <div style="flex: 1;"></div>
                        <button class="btn btn-primary" id="nextToScreen2" disabled>
                            Continue to Details
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Screen 2: Enter Details -->
                <div class="card screen" id="screen2">
                    <div class="card-header">
                        <h1 class="card-title">Transaction Details</h1>
                        <p class="card-subtitle">Enter the amount you want to exchange and your PayPal information.</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="cryptoSelectedLabel">Amount to Exchange</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="cryptoAmount" placeholder="0.00" min="0" step="0.001">
                            <select class="form-control input-group-select" id="amountUnit">
                                <option value="crypto">Crypto</option>
                                <option value="usd">USD</option>
                            </select>
                        </div>
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 8px;">
                            Minimum: 0.001 <span id="minCryptoLabel">BTC</span> ≈ $<span id="minUsdValue">0</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">PayPal Email Address</label>
                        <input type="email" class="form-control" id="paypalEmail" placeholder="you@example.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Confirm Email Address</label>
                        <input type="email" class="form-control" id="confirmEmail" placeholder="you@example.com">
                    </div>

                    <div class="amount-display">
                        <div class="amount-row">
                            <span class="amount-label">Current Market Price</span>
                            <span class="amount-value" id="currentPrice">Loading...</span>
                        </div>
                        <div class="amount-row">
                            <span class="amount-label">You Send</span>
                            <span class="amount-value" id="sendAmount">0.00000000 BTC</span>
                        </div>
                        <div class="amount-row">
                            <span class="amount-label">Market Value</span>
                            <span class="amount-value" id="usdValue">$0.00</span>
                        </div>
                        <div class="amount-row">
                            <span class="amount-label">Our Fee</span>
                            <span class="amount-value" style="color: var(--success);">0.0% (Free)</span>
                        </div>
                        <div class="amount-row">
                            <span class="amount-label">+10% Bonus</span>
                            <span class="amount-value" id="bonusAmount">$0.00</span>
                        </div>
                        <div class="amount-row">
                            <span class="amount-label">You Will Receive</span>
                            <span class="amount-value" id="receiveAmount">$0.00</span>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-secondary" id="backToScreen1">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn btn-primary" id="nextToScreen3" disabled>
                            Continue to Payment
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Screen 3: Send Payment -->
                <div class="card screen" id="screen3">
                    <div class="card-header">
                        <h1 class="card-title">Send Payment</h1>
                        <p class="card-subtitle">Send your cryptocurrency to the address below. Once confirmed, you'll receive PayPal funds from @bitfiexchange.</p>
                    </div>

                    <div class="payment-summary">
                        <div class="payment-summary-header">
                            <div class="payment-summary-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div>
                                <div class="payment-summary-title">Transaction Summary</div>
                                <div class="payment-summary-subtitle">You'll receive funds from @bitfiexchange on PayPal</div>
                            </div>
                        </div>

                        <div class="payment-details">
                            <div class="payment-item">
                                <span class="payment-label">Cryptocurrency</span>
                                <span class="payment-value" id="finalCryptoName">Bitcoin (BTC)</span>
                            </div>
                            <div class="payment-item">
                                <span class="payment-label">Amount to Send</span>
                                <span class="payment-value" id="finalCryptoAmount">0.00000000 BTC</span>
                            </div>
                            <div class="payment-item">
                                <span class="payment-label">Current Market Value</span>
                                <span class="payment-value" id="finalUsdValue">$0.00</span>
                            </div>
                            <div class="payment-item">
                                <span class="payment-label">+10% Bonus</span>
                                <span class="payment-value" id="finalBonusAmount" style="color: rgba(255, 255, 255, 0.9);">$0.00</span>
                            </div>
                            <div class="payment-item">
                                <span class="payment-label">PayPal Recipient</span>
                                <span class="payment-value" id="finalPaypalEmail">you@example.com</span>
                            </div>
                            <div class="payment-item">
                                <span class="payment-label">You Will Receive</span>
                                <span class="payment-value" id="finalReceiveAmount">$0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="wallet-info">
                        <div class="wallet-header">
                            <div class="wallet-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div>
                                <div class="wallet-title">Send to This Address</div>
                                <div class="card-subtitle">Send the exact amount shown above to this address</div>
                            </div>
                        </div>

                        <div class="wallet-address" id="walletAddress">
                            Loading wallet address...
                        </div>

                        <div style="text-align: center; margin-top: 16px;">
                            <button class="btn btn-secondary" id="copyAddress">
                                <i class="far fa-copy"></i> Copy Address
                            </button>
                        </div>

                        <div class="qr-container">
                            <div class="qr-code">
                                <i class="fas fa-qrcode"></i>
                                <div class="qr-label">Scan QR Code</div>
                            </div>
                        </div>

                        <div style="text-align: center; color: var(--text-secondary); font-size: 0.875rem; margin-top: 20px;">
                            <i class="fas fa-info-circle"></i> Send only <span id="walletCryptoName">Bitcoin (BTC)</span> to this address
                        </div>
                    </div>

                    <div class="timer">
                        <i class="fas fa-clock"></i>
                        <span>Address expires in: </span>
                        <span id="countdown">29:59</span>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-secondary" id="backToScreen2">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn btn-primary" id="confirmTransaction">
                            <i class="fas fa-paper-plane"></i> I've Sent the Payment
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-card">
                    <div class="rate-card">
                        <div class="rate-card-title">+10% Bonus Rate</div>
                        <div class="rate-card-value">1.10×</div>
                        <div class="rate-card-subtitle">Market price × 1.10 = Your rate</div>
                    </div>

                    <div class="paypal-info">
                        <div class="paypal-icon">
                            <i class="fab fa-paypal"></i>
                        </div>
                        <div class="paypal-text">
                            <div class="paypal-title">Instant PayPal Transfer</div>
                            <div class="paypal-subtitle">From @bitfiexchange within 5-15 minutes</div>
                        </div>
                    </div>
                </div>

                <div class="card sidebar-card">
                    <div class="card-header">
                        <h2 class="card-title">Live Prices</h2>
                        <p class="card-subtitle">Real-time cryptocurrency prices</p>
                    </div>

                    <div class="price-ticker" id="priceTicker">
                        <!-- Price ticker will be populated by JavaScript -->
                    </div>

                    <div style="margin-top: 24px; padding: 20px; background-color: var(--bg-tertiary); border-radius: 12px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="width: 40px; height: 40px; background-color: rgba(37, 99, 235, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--primary);">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">Instant Processing</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">No delays, no hidden fees</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card sidebar-card">
                    <div class="card-header">
                        <h2 class="card-title">How It Works</h2>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 24px; margin-top: 16px;">
                        <div style="display: flex; gap: 16px;">
                            <div style="min-width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.875rem; font-weight: 700;">1</div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 6px;">Select Crypto</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">Choose from top cryptocurrencies with real-time prices</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 16px;">
                            <div style="min-width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.875rem; font-weight: 700;">2</div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 6px;">Enter Amount</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">Specify amount and PayPal email for +10% bonus</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 16px;">
                            <div style="min-width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.875rem; font-weight: 700;">3</div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 6px;">Send Payment</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">Send crypto to provided address</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 16px;">
                            <div style="min-width: 32px; height: 32px; background: linear-gradient(135deg, var(--success), var(--success-light)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.875rem; font-weight: 700;">4</div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 6px;">Receive PayPal Funds</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">Get funds from @bitfiexchange with +10% bonus</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="security-badges">
                    <div class="badge">
                        <i class="fas fa-shield-alt"></i>
                        <span>Bank-Level Security</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-lock"></i>
                        <span>Encrypted Transactions</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-bolt"></i>
                        <span>Instant Processing</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-chart-line"></i>
                        <span>Best Market Rates</span>
                    </div>
                </div>

                <p class="disclaimer">
                    CryptoBridge is a professional cryptocurrency exchange simulation platform.
                    Real-time prices are fetched from CoinGecko API. TradingView widgets display live market charts.
                    This platform is for demonstration purposes only. No real transactions are processed.
                    Funds shown from @bitfiexchange are simulated for demonstration.
                </p>

                <div class="copyright">
                    © 2026 CryptoBridge. All rights reserved. | Data by CoinGecko & TradingView
                </div>
            </div>
        </div>
    </footer>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span>Payment on process! You'll receive funds from @bitfiexchange shortly.</span>
    </div>

    <script>
        // Professional crypto exchange with enhanced UI/UX
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        async function initApp() {
            // App state
            const state = {
                selectedCrypto: null,
                currentPrices: {},
                currentStep: 1,
                countdownInterval: null,
                theme: localStorage.getItem('theme') || 'light',
                priceUpdateInterval: null
            };

            // Cryptocurrency data with real logos
            const cryptocurrencies = [
                {
                    symbol: "BTC",
                    name: "Bitcoin",
                    color: "#F7931A",
                    icon: "https://cryptologos.cc/logos/bitcoin-btc-logo.png",
                    wallet: "bc1qw4p7s4k2qfs2e2hy8nshkk8jttathfs9geln23",
                    coingeckoId: "bitcoin",
                    tradingviewSymbol: "BINANCE:BTCUSDT"
                },
                {
                    symbol: "ETH",
                    name: "Ethereum",
                    color: "#627EEA",
                    icon: "https://cryptologos.cc/logos/ethereum-eth-logo.png",
                    wallet: "0x29EcEF12786e5B26b85990e0C99368ff5706bE75",
                    coingeckoId: "ethereum",
                    tradingviewSymbol: "BINANCE:ETHUSDT"
                },
                {
                    symbol: "BNB",
                    name: "Binance Coin",
                    color: "#F0B90B",
                    icon: "https://cryptologos.cc/logos/bnb-bnb-logo.png",
                    wallet: "0x29EcEF12786e5B26b85990e0C99368ff5706bE75",
                    coingeckoId: "binancecoin",
                    tradingviewSymbol: "BINANCE:BNBUSDT"
                },
                {
                    symbol: "XRP",
                    name: "Ripple",
                    color: "#23292F",
                    icon: "https://cryptologos.cc/logos/xrp-xrp-logo.png",
                    wallet: "rpNG3m88D377n5DEPGqzuT7EkwC7wJ5cNk",
                    coingeckoId: "ripple",
                    tradingviewSymbol: "BINANCE:XRPUSDT"
                },
                {
                    symbol: "ADA",
                    name: "Cardano",
                    color: "#0033AD",
                    icon: "https://cryptologos.cc/logos/cardano-ada-logo.png",
                    wallet: "addr1q8chx7fzks6qaeu9c5mu9mvd7uvdtfcc29u4f6jyhvpqhd2z6d42ak3y3xgvzhu3ynt6ycqglpu72knxd22ksza5cavs002ycj",
                    coingeckoId: "cardano",
                    tradingviewSymbol: "BINANCE:ADAUSDT"
                },
                {
                    symbol: "DOGE",
                    name: "Dogecoin",
                    color: "#C2A633",
                    icon: "https://cryptologos.cc/logos/dogecoin-doge-logo.png",
                    wallet: "DSjPvp3m54gG6b5uRpyx54PYcFCbtNKWCs",
                    coingeckoId: "dogecoin",
                    tradingviewSymbol: "BINANCE:DOGEUSDT"
                },
                {
                    symbol: "SOL",
                    name: "Solana",
                    color: "#00FFA3",
                    icon: "https://cryptologos.cc/logos/solana-sol-logo.png",
                    wallet: "AMC3gY5qJxxF6sNcPzzsmFvpucJJvBydLCiZggaJyeJc",
                    coingeckoId: "solana",
                    tradingviewSymbol: "BINANCE:SOLUSDT"
                },
                {
                    symbol: "DOT",
                    name: "Polkadot",
                    color: "#E6007A",
                    icon: "https://cryptologos.cc/logos/polkadot-new-dot-logo.png",
                    wallet: "16EPRRTjJcJXVdhhZ558bLykFTCUAdXm9CHMeyGisFmZKzvK",
                    coingeckoId: "polkadot",
                    tradingviewSymbol: "BINANCE:DOTUSDT"
                }
            ];

            // DOM Elements
            const elements = {
                themeToggle: document.getElementById('themeToggle'),
                lastUpdated: document.getElementById('lastUpdated'),
                screens: {
                    screen1: document.getElementById('screen1'),
                    screen2: document.getElementById('screen2'),
                    screen3: document.getElementById('screen3')
                },
                steps: document.querySelectorAll('.step'),
                cryptoGrid: document.getElementById('cryptoGrid'),
                tradingViewWidget: document.getElementById('tradingViewWidget'),
                nextToScreen2: document.getElementById('nextToScreen2'),
                nextToScreen3: document.getElementById('nextToScreen3'),
                backToScreen1: document.getElementById('backToScreen1'),
                backToScreen2: document.getElementById('backToScreen2'),
                cryptoAmount: document.getElementById('cryptoAmount'),
                amountUnit: document.getElementById('amountUnit'),
                paypalEmail: document.getElementById('paypalEmail'),
                confirmEmail: document.getElementById('confirmEmail'),
                sendAmount: document.getElementById('sendAmount'),
                currentPrice: document.getElementById('currentPrice'),
                usdValue: document.getElementById('usdValue'),
                bonusAmount: document.getElementById('bonusAmount'),
                receiveAmount: document.getElementById('receiveAmount'),
                minUsdValue: document.getElementById('minUsdValue'),
                finalCryptoName: document.getElementById('finalCryptoName'),
                finalCryptoAmount: document.getElementById('finalCryptoAmount'),
                finalUsdValue: document.getElementById('finalUsdValue'),
                finalBonusAmount: document.getElementById('finalBonusAmount'),
                finalPaypalEmail: document.getElementById('finalPaypalEmail'),
                finalReceiveAmount: document.getElementById('finalReceiveAmount'),
                walletAddress: document.getElementById('walletAddress'),
                walletCryptoName: document.getElementById('walletCryptoName'),
                countdown: document.getElementById('countdown'),
                copyAddress: document.getElementById('copyAddress'),
                confirmTransaction: document.getElementById('confirmTransaction'),
                notification: document.getElementById('notification'),
                cryptoSelectedLabel: document.getElementById('cryptoSelectedLabel'),
                minCryptoLabel: document.getElementById('minCryptoLabel'),
                priceTicker: document.getElementById('priceTicker')
            };

            // Set initial theme
            if (state.theme === 'dark') {
                document.body.classList.add('dark-theme');
                elements.themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                elements.themeToggle.style.color = '#fbbf24';
            }

            // Initialize
            initializeApp();

            async function initializeApp() {
                loadCryptoCards();
                await fetchAllPrices();
                setupEventListeners();
                startPriceUpdates();
            }

            function loadCryptoCards() {
                cryptocurrencies.forEach(crypto => {
                    const card = document.createElement('div');
                    card.className = 'crypto-card';
                    card.dataset.symbol = crypto.symbol;

                    card.innerHTML = `
                        <div class="crypto-icon">
                            <img src="${crypto.icon}">
                        </div>
                        <div class="crypto-name">${crypto.name}</div>
                        <div class="crypto-symbol">${crypto.symbol}</div>
                        <div class="crypto-price">
                            <div class="loading-price"></div>
                        </div>
                        <div class="price-change">
                            <div class="loading-price" style="width: 70px;"></div>
                        </div>
                    `;

                    card.addEventListener('click', () => selectCrypto(crypto.symbol));
                    elements.cryptoGrid.appendChild(card);
                });
            }

            async function fetchAllPrices() {
                try {
                    const coinIds = cryptocurrencies.map(c => c.coingeckoId).join(',');
                    const response = await fetch(
                        `https://api.coingecko.com/api/v3/simple/price?ids=${coinIds}&vs_currencies=usd&include_24hr_change=true`
                    );

                    if (!response.ok) throw new Error('API Error');

                    const data = await response.json();

                    cryptocurrencies.forEach(crypto => {
                        const coinData = data[crypto.coingeckoId];
                        if (coinData) {
                            state.currentPrices[crypto.symbol] = {
                                price: coinData.usd,
                                change: coinData.usd_24h_change || 0,
                                changePercent: coinData.usd_24h_change ?
                                    Math.abs(coinData.usd_24h_change).toFixed(2) : '0.00'
                            };

                            updateCryptoCard(crypto.symbol);
                        }
                    });

                    updatePriceTicker();
                    updateLastUpdatedTime();

                } catch (error) {
                    console.log('Using fallback prices');
                    useMockPrices();
                }
            }

            function updateCryptoCard(symbol) {
                const card = document.querySelector(`.crypto-card[data-symbol="${symbol}"]`);
                if (!card) return;

                const crypto = cryptocurrencies.find(c => c.symbol === symbol);
                const priceData = state.currentPrices[symbol];

                if (!priceData) return;

                const priceElement = card.querySelector('.crypto-price');
                const changeElement = card.querySelector('.price-change');

                if (priceElement) {
                    const price = priceData.price;
                    priceElement.innerHTML = `$${price.toLocaleString('en-US', {
                        minimumFractionDigits: price < 1 ? 6 : 2,
                        maximumFractionDigits: price < 1 ? 6 : 2
                    })}`;
                }

                if (changeElement) {
                    const isPositive = priceData.change >= 0;
                    changeElement.innerHTML = `
                        <span class="price-change ${isPositive ? '' : 'negative'}">
                            ${isPositive ? '↗' : '↘'} ${priceData.changePercent}%
                        </span>
                    `;
                }
            }

            function updatePriceTicker() {
                elements.priceTicker.innerHTML = '';

                cryptocurrencies.forEach(crypto => {
                    const priceData = state.currentPrices[crypto.symbol];
                    if (!priceData) return;

                    const isPositive = priceData.change >= 0;
                    const tickerItem = document.createElement('div');
                    tickerItem.className = 'ticker-item';

                    tickerItem.innerHTML = `
                        <div class="ticker-crypto">
                            <div class="ticker-icon">
                                <img src="${crypto.icon}" alt="${crypto.symbol}" style="width: 24px; height: 24px;">
                            </div>
                            <div>
                                <div class="ticker-symbol">${crypto.symbol}</div>
                                <div class="ticker-name">${crypto.name}</div>
                            </div>
                        </div>
                        <div class="ticker-price">
                            <div class="ticker-price-value">
                                $${priceData.price.toLocaleString('en-US', {
                                    minimumFractionDigits: priceData.price < 1 ? 4 : 2,
                                    maximumFractionDigits: priceData.price < 1 ? 4 : 2
                                })}
                            </div>
                            <div class="ticker-price-change ${isPositive ? '' : 'negative'}">
                                ${isPositive ? '↗' : '↘'} ${priceData.changePercent}%
                            </div>
                        </div>
                    `;

                    elements.priceTicker.appendChild(tickerItem);
                });
            }

            function useMockPrices() {
                cryptocurrencies.forEach(crypto => {
                    const basePrice = getMockPrice(crypto.symbol);
                    const change = (Math.random() - 0.5) * 8;

                    state.currentPrices[crypto.symbol] = {
                        price: basePrice,
                        change: change,
                        changePercent: Math.abs(change).toFixed(2)
                    };

                    updateCryptoCard(crypto.symbol);
                });

                updatePriceTicker();
                updateLastUpdatedTime();
            }

            function getMockPrice(symbol) {
                const mockPrices = {
                    "BTC": 45000 + Math.random() * 3000,
                    "ETH": 3000 + Math.random() * 500,
                    "BNB": 400 + Math.random() * 50,
                    "XRP": 0.6 + Math.random() * 0.2,
                    "ADA": 0.4 + Math.random() * 0.1,
                    "DOGE": 0.08 + Math.random() * 0.02,
                    "SOL": 90 + Math.random() * 20,
                    "DOT": 6 + Math.random() * 2
                };

                return mockPrices[symbol] || 100;
            }

            function updateLastUpdatedTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                elements.lastUpdated.innerHTML = `
                    <i class="fas fa-sync-alt"></i>
                    <span>Updated ${timeString}</span>
                `;
            }

            function startPriceUpdates() {
                state.priceUpdateInterval = setInterval(async () => {
                    await fetchAllPrices();
                    if (state.selectedCrypto) {
                        updateAmounts();
                        updateMinUsdValue();
                    }
                }, 30000);
            }

            function setupEventListeners() {
                elements.themeToggle.addEventListener('click', toggleTheme);
                elements.nextToScreen2.addEventListener('click', () => navigateTo(2));
                elements.nextToScreen3.addEventListener('click', () => navigateTo(3));
                elements.backToScreen1.addEventListener('click', () => navigateTo(1));
                elements.backToScreen2.addEventListener('click', () => navigateTo(2));
                elements.cryptoAmount.addEventListener('input', updateAmounts);
                elements.amountUnit.addEventListener('change', handleAmountUnitChange);
                elements.paypalEmail.addEventListener('input', validateScreen2);
                elements.confirmEmail.addEventListener('input', validateScreen2);
                elements.copyAddress.addEventListener('click', copyWalletAddress);
                elements.confirmTransaction.addEventListener('click', simulateTransaction);
            }

            function toggleTheme() {
                if (document.body.classList.contains('dark-theme')) {
                    document.body.classList.remove('dark-theme');
                    elements.themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    elements.themeToggle.style.color = '';
                    localStorage.setItem('theme', 'light');
                    state.theme = 'light';
                } else {
                    document.body.classList.add('dark-theme');
                    elements.themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    elements.themeToggle.style.color = '#fbbf24';
                    localStorage.setItem('theme', 'dark');
                    state.theme = 'dark';
                }

                // Update TradingView widget theme if active
                if (state.selectedCrypto && elements.tradingViewWidget.classList.contains('active')) {
                    setTimeout(() => {
                        showTradingViewWidget(state.selectedCrypto.tradingviewSymbol, state.selectedCrypto.name);
                    }, 100);
                }
            }

            async function selectCrypto(symbol) {
                document.querySelectorAll('.crypto-card').forEach(card => {
                    card.classList.remove('selected');
                });

                const selectedCard = document.querySelector(`.crypto-card[data-symbol="${symbol}"]`);
                selectedCard.classList.add('selected');

                state.selectedCrypto = cryptocurrencies.find(c => c.symbol === symbol);
                elements.nextToScreen2.disabled = false;

                elements.cryptoSelectedLabel.textContent = `Amount in ${state.selectedCrypto.symbol}`;
                elements.minCryptoLabel.textContent = state.selectedCrypto.symbol;

                updateMinUsdValue();
                showTradingViewWidget(state.selectedCrypto.tradingviewSymbol, state.selectedCrypto.name);
                updateAmounts();
            }

            function showTradingViewWidget(symbol, name) {
                elements.tradingViewWidget.classList.add('active');
                elements.tradingViewWidget.innerHTML = '';

                new TradingView.widget({
                    "container_id": "tradingViewWidget",
                    "width": "100%",
                    "height": "420",
                    "symbol": symbol,
                    "interval": "60",
                    "timezone": "exchange",
                    "theme": state.theme === 'dark' ? 'dark' : 'light',
                    "style": "1",
                    "locale": "en",
                    "toolbar_bg": state.theme === 'dark' ? "#1e293b" : "#f1f3f6",
                    "enable_publishing": false,
                    "withdateranges": true,
                    "hide_side_toolbar": false,
                    "allow_symbol_change": true,
                    "details": true,
                    "hotlist": true,
                    "calendar": false,
                    "studies": ["Volume@tv-basicstudies"],
                    "show_popup_button": true,
                    "popup_width": "1000",
                    "popup_height": "650",
                    "container_id": "tradingViewWidget"
                });
            }

            function navigateTo(step) {
                state.currentStep = step;

                elements.steps.forEach((stepEl, index) => {
                    const stepNum = index + 1;
                    stepEl.classList.toggle('active', stepNum === step);
                    stepEl.classList.toggle('completed', stepNum < step);
                });

                Object.keys(elements.screens).forEach((screenKey, index) => {
                    const screenNum = index + 1;
                    elements.screens[screenKey].classList.toggle('active', screenNum === step);
                });

                if (step === 3) {
                    updateScreen3Details();
                    startCountdown();
                } else {
                    stopCountdown();
                }

                if (step !== 1) {
                    elements.tradingViewWidget.classList.remove('active');
                }
            }

            function handleAmountUnitChange() {
                if (!state.selectedCrypto) return;

                const unit = elements.amountUnit.value;
                const amount = parseFloat(elements.cryptoAmount.value) || 0;
                const priceData = state.currentPrices[state.selectedCrypto.symbol];

                if (!priceData || amount === 0) return;

                if (unit === 'usd') {
                    const cryptoAmount = amount / priceData.price;
                    elements.cryptoAmount.value = cryptoAmount.toFixed(8);
                }

                updateAmounts();
            }

            function updateAmounts() {
                if (!state.selectedCrypto) return;

                const amount = parseFloat(elements.cryptoAmount.value) || 0;
                const priceData = state.currentPrices[state.selectedCrypto.symbol];

                if (!priceData) {
                    elements.currentPrice.textContent = 'Loading...';
                    return;
                }

                const price = priceData.price;
                let cryptoAmount, usdValue;

                if (elements.amountUnit.value === 'usd') {
                    usdValue = amount;
                    cryptoAmount = amount / price;
                } else {
                    cryptoAmount = amount;
                    usdValue = amount * price;
                }

                const bonus = usdValue * 0.10;
                const finalAmount = usdValue + bonus;

                elements.currentPrice.textContent = `$${price.toLocaleString('en-US', {
                    minimumFractionDigits: price < 1 ? 6 : 2,
                    maximumFractionDigits: price < 1 ? 6 : 2
                })}`;

                elements.sendAmount.textContent = `${cryptoAmount.toFixed(8)} ${state.selectedCrypto.symbol}`;
                elements.usdValue.textContent = `$${usdValue.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
                elements.bonusAmount.textContent = `$${bonus.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
                elements.receiveAmount.textContent = `$${finalAmount.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;

                const minAmount = 0.001;
                if (cryptoAmount > 0 && cryptoAmount < minAmount) {
                    elements.nextToScreen3.disabled = true;
                } else {
                    validateScreen2();
                }
            }

            function updateMinUsdValue() {
                if (!state.selectedCrypto) return;

                const priceData = state.currentPrices[state.selectedCrypto.symbol];
                if (!priceData) return;

                const minUsd = 0.001 * priceData.price;
                elements.minUsdValue.textContent = minUsd.toFixed(2);
            }

            function validateScreen2() {
                const amount = parseFloat(elements.cryptoAmount.value) || 0;
                const paypal = elements.paypalEmail.value.trim();
                const confirm = elements.confirmEmail.value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                const priceData = state.currentPrices[state.selectedCrypto?.symbol];
                if (!priceData) return false;

                const cryptoAmount = elements.amountUnit.value === 'usd' ?
                    amount / priceData.price : amount;

                const isValid = cryptoAmount >= 0.001 &&
                               emailRegex.test(paypal) &&
                               paypal === confirm &&
                               paypal.length > 0;

                elements.nextToScreen3.disabled = !isValid;
                return isValid;
            }

            function updateScreen3Details() {
                if (!state.selectedCrypto) return;

                const amount = parseFloat(elements.cryptoAmount.value) || 0;
                const priceData = state.currentPrices[state.selectedCrypto.symbol];

                if (!priceData) return;

                const price = priceData.price;
                let cryptoAmount, usdValue;

                if (elements.amountUnit.value === 'usd') {
                    usdValue = amount;
                    cryptoAmount = amount / price;
                } else {
                    cryptoAmount = amount;
                    usdValue = amount * price;
                }

                const bonus = usdValue * 0.10;
                const finalAmount = usdValue + bonus;

                elements.finalCryptoName.textContent = `${state.selectedCrypto.name} (${state.selectedCrypto.symbol})`;
                elements.finalCryptoAmount.textContent = `${cryptoAmount.toFixed(8)} ${state.selectedCrypto.symbol}`;
                elements.finalUsdValue.textContent = `$${usdValue.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
                elements.finalBonusAmount.textContent = `$${bonus.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
                elements.finalPaypalEmail.textContent = elements.paypalEmail.value;
                elements.finalReceiveAmount.textContent = `$${finalAmount.toLocaleString('en-US', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;
                elements.walletAddress.textContent = state.selectedCrypto.wallet;
                elements.walletCryptoName.textContent = `${state.selectedCrypto.name} (${state.selectedCrypto.symbol})`;
            }

            function startCountdown() {
                let timeLeft = 30 * 60;

                if (state.countdownInterval) clearInterval(state.countdownInterval);

                updateCountdownDisplay(timeLeft);

                state.countdownInterval = setInterval(() => {
                    timeLeft--;

                    if (timeLeft <= 0) {
                        clearInterval(state.countdownInterval);
                        elements.countdown.textContent = "EXPIRED";
                        elements.countdown.style.color = "var(--error)";
                        return;
                    }

                    updateCountdownDisplay(timeLeft);
                }, 1000);
            }

            function updateCountdownDisplay(timeLeft) {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                elements.countdown.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            function stopCountdown() {
                if (state.countdownInterval) {
                    clearInterval(state.countdownInterval);
                    state.countdownInterval = null;
                }
            }

            function copyWalletAddress() {
                if (!state.selectedCrypto) return;

                navigator.clipboard.writeText(state.selectedCrypto.wallet)
                    .then(() => {
                        const originalText = elements.copyAddress.innerHTML;
                        elements.copyAddress.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        elements.copyAddress.style.background = 'linear-gradient(135deg, var(--success), var(--success-light))';

                        setTimeout(() => {
                            elements.copyAddress.innerHTML = originalText;
                            elements.copyAddress.style.background = '';
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy:', err);
                    });
            }

            function simulateTransaction() {
                showNotification('Payment simulated successfully! You will receive $' +
                    elements.finalReceiveAmount.textContent.replace('$', '') +
                    ' from @bitfiexchange on PayPal.');

                setTimeout(() => {
                    navigateTo(1);
                    resetForm();
                }, 3000);
            }

            function resetForm() {
                document.querySelectorAll('.crypto-card').forEach(card => {
                    card.classList.remove('selected');
                });

                elements.cryptoAmount.value = '';
                elements.amountUnit.value = 'crypto';
                elements.paypalEmail.value = '';
                elements.confirmEmail.value = '';

                state.selectedCrypto = null;
                elements.nextToScreen2.disabled = true;
                elements.nextToScreen3.disabled = true;

                elements.tradingViewWidget.classList.remove('active');
                updateAmounts();
            }

            function showNotification(message) {
                elements.notification.querySelector('span').textContent = message;
                elements.notification.classList.add('show');

                setTimeout(() => {
                    elements.notification.classList.remove('show');
                }, 3000);
            }
        }
    </script>
</body>
</html>
